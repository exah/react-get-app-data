<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [withData][1]
    -   [Parameters][2]
    -   [Examples][3]
-   [getAppInitialData][4]
    -   [Parameters][5]
    -   [Examples][6]
-   [Types][7]
    -   [GetDataFn][8]
        -   [Examples][9]

## withData

HOC for getting async data for initial component props and in subsequent updates.

### Parameters

-   `getData` **[GetDataFn][10]** 
-   `shouldDataUpdate` **function (prev: Props, next: Props): [boolean][11]**  (optional, default `defaultShouldDataUpdate`)
-   `mergeProps` **function (props: Props, state: State): Props**  (optional, default `defaultMergeProps`)

### Examples

```javascript
import { withData } from 'react-get-app-data'

const Page = ({ message }) => (
  <div>
    {message}
  </div>
)

export default withData(() =>
  Promise.resolve({ message: 'ok' })
)(Page)
```

Returns **HOC** 

## getAppInitialData

Request all app data from `withData` wrapped components deep inside app `tree`, useful on server for propper SSR.

### Parameters

-   `tree` **ReactElement&lt;any>** — Your app root element
-   `context` **[Object][12]** — Can be used to provide additional data to `GetDataFn` (like `req`, `res` from an `express` middleware).
-   `dataStore` **DataStoreType**  (optional, default `defaultDataStore`)

### Examples

```javascript
import React from 'react'
import { renderToString } from 'react-dom/server'
import { getAppInitialData } from 'react-get-app-data'
import { html } from 'common-tags'

import App from './app'

export default () => (req, res) => {
  const appTree = (<App />)

  getAppInitialData(appTree, { req, res })
    .then((initialData) => {
      res.send(html`
        <!DOCTYPE html>
        <html>
          <body>
            <div id="app">${renderToString(appTree)}</div>
            <script>
              (function () {
                window._ssr = ${JSON.stringify({ initialData })};
              })();
            </script>
            <script src="/client.js"></script>
          </body>
        </html>
      `)
    })
    .catch((error) => {
      console.error(error)
      res.status(500)
      res.send(`Error: ${error.message}`)
    })
}
```

Returns **[Promise][13]&lt;[Object][12]>** 

## Types




### GetDataFn

Function that returns Promise with props for `withData` wrapped component.
First argument is **Object** with `isClient`, `isServer` flags, parent component props and context from `getAppInitialData`.

Type: function (context: [Object][12]): [Promise][13]&lt;([Object][12] \| [boolean][11])>

#### Examples

```javascript
const getData = ({ isClient, isServer, ...parentProps }) => Promise.resolve({
  message: isServer ? 'server' : 'client'
})
```

[1]: #withdata

[2]: #parameters

[3]: #examples

[4]: #getappinitialdata

[5]: #parameters-1

[6]: #examples-1

[7]: #types

[8]: #getdatafn

[9]: #examples-2

[10]: #getdatafn

[11]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[12]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[13]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise
